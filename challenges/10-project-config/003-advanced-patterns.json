{
  "id": "10-003",
  "module": "project-config",
  "title": "Advanced CLAUDE.md Patterns",
  "description": "Learn advanced CLAUDE.md patterns including architecture documentation, file organization rules, and context about dependencies.",
  "difficulty": "intermediate",
  "xpReward": 175,
  "estimatedMinutes": 10,
  "skills": ["architecture-docs", "dependency-context"],

  "setup": {
    "workingDir": "~/dojo-workspace/challenge-10-003",
    "initialFiles": [
      {
        "path": "README.md",
        "content": "# Challenge: Advanced CLAUDE.md Patterns\n\nThis is a complex project. Create comprehensive documentation in CLAUDE.md.\n\n## Objectives\n1. Document the architecture (API, services, database)\n2. Explain key dependencies and why they're used\n3. Add file organization rules\n4. Include common workflows\n"
      },
      {
        "path": "CLAUDE.md",
        "content": "# E-Commerce API\n\nBackend API for an e-commerce platform.\n"
      },
      {
        "path": "package.json",
        "content": "{\n  \"name\": \"ecommerce-api\",\n  \"dependencies\": {\n    \"express\": \"^4.18.0\",\n    \"prisma\": \"^5.0.0\",\n    \"@prisma/client\": \"^5.0.0\",\n    \"zod\": \"^3.22.0\",\n    \"jsonwebtoken\": \"^9.0.0\",\n    \"bcrypt\": \"^5.1.0\",\n    \"stripe\": \"^14.0.0\"\n  }\n}\n"
      },
      {
        "path": "src/index.ts",
        "content": "import express from 'express';\nimport { userRoutes } from './routes/users';\nimport { productRoutes } from './routes/products';\nimport { orderRoutes } from './routes/orders';\nimport { errorHandler } from './middleware/errors';\n\nconst app = express();\napp.use('/api/users', userRoutes);\napp.use('/api/products', productRoutes);\napp.use('/api/orders', orderRoutes);\napp.use(errorHandler);\n"
      },
      {
        "path": "src/routes/users.ts",
        "content": "import { Router } from 'express';\nimport { UserController } from '../controllers/UserController';\n\nexport const userRoutes = Router();\nuserRoutes.post('/register', UserController.register);\nuserRoutes.post('/login', UserController.login);\n"
      },
      {
        "path": "src/services/PaymentService.ts",
        "content": "import Stripe from 'stripe';\n\nexport class PaymentService {\n  private stripe: Stripe;\n  \n  constructor() {\n    this.stripe = new Stripe(process.env.STRIPE_KEY!);\n  }\n  \n  async createPayment(amount: number) {\n    return this.stripe.paymentIntents.create({ amount, currency: 'usd' });\n  }\n}\n"
      },
      {
        "path": "prisma/schema.prisma",
        "content": "generator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n\nmodel User {\n  id        String   @id @default(uuid())\n  email     String   @unique\n  orders    Order[]\n}\n\nmodel Product {\n  id    String @id @default(uuid())\n  name  String\n  price Int\n}\n\nmodel Order {\n  id      String @id @default(uuid())\n  userId  String\n  user    User   @relation(fields: [userId], references: [id])\n  total   Int\n}\n"
      }
    ],
    "cleanBefore": true
  },

  "objectives": [
    {
      "id": "obj-1",
      "description": "Document the architecture layers",
      "type": "file_contains",
      "target": "CLAUDE.md",
      "pattern": "[Aa]rchitecture|[Rr]outes|[Cc]ontroller|[Ss]ervice|[Ll]ayer",
      "required": true
    },
    {
      "id": "obj-2",
      "description": "Explain key dependencies",
      "type": "file_contains",
      "target": "CLAUDE.md",
      "pattern": "[Pp]risma|[Ss]tripe|[Zz]od|[Dd]ependenc",
      "required": true
    },
    {
      "id": "obj-3",
      "description": "Document file organization",
      "type": "file_contains",
      "target": "CLAUDE.md",
      "pattern": "src/|folder|structure|organiz|routes/|services/|controllers/",
      "required": true
    },
    {
      "id": "obj-4",
      "description": "Include database information",
      "type": "file_contains",
      "target": "CLAUDE.md",
      "pattern": "[Dd]atabase|[Pp]ostgres|[Pp]risma|schema|[Mm]odel",
      "required": true
    }
  ],

  "bonusObjectives": [
    {
      "id": "bonus-1",
      "description": "Add common workflows (adding a new endpoint, etc.)",
      "type": "file_contains",
      "target": "CLAUDE.md",
      "pattern": "[Ww]orkflow|[Hh]ow to|[Ss]tep|[Aa]dd.*endpoint|[Cc]reate.*route",
      "xpBonus": 50
    }
  ],

  "hints": [
    {
      "level": 1,
      "text": "Good CLAUDE.md files document architecture, dependencies, and workflows.",
      "xpCost": 15
    },
    {
      "level": 2,
      "text": "Try: 'Expand CLAUDE.md with architecture documentation, key dependencies explained, and file organization rules'",
      "xpCost": 35
    },
    {
      "level": 3,
      "text": "Ask: 'Create comprehensive CLAUDE.md documentation: 1) Architecture overview (routes → controllers → services → Prisma) 2) Key deps (Prisma for DB, Stripe for payments, Zod for validation) 3) File structure guide 4) How to add a new API endpoint workflow'",
      "xpCost": 65
    }
  ],

  "solution": {
    "approach": "Create comprehensive documentation covering all aspects of the project.",
    "example": "Build out CLAUDE.md with architecture, dependencies, structure, and workflows",
    "alternativeApproaches": [
      "Document everything Claude needs to know about this codebase",
      "Create a complete project guide in CLAUDE.md"
    ]
  },

  "learningPoints": [
    "Architecture docs help Claude understand code relationships",
    "Explaining WHY dependencies are used helps Claude use them correctly",
    "Workflow documentation enables Claude to follow team patterns"
  ],

  "nextChallenge": "10-004"
}
