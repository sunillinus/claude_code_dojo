{
  "id": "16-002",
  "module": "plugin-development",
  "title": "Create Your First Plugin",
  "description": "Build a minimal but working Claude Code plugin from scratch. Learn to create the manifest, add a skill, and understand the minimum viable plugin.",
  "difficulty": "intermediate",
  "xpReward": 275,
  "estimatedMinutes": 15,
  "skills": ["plugin-scaffolding", "manifest-creation", "skill-authoring"],

  "setup": {
    "workingDir": "~/dojo-workspace/challenge-16-002",
    "initialFiles": [
      {
        "path": "README.md",
        "content": "# Challenge: Create Your First Plugin\n\nBuild a working Claude Code plugin from scratch -- manifest, skill,\nand all.\n\n---\n\n## From Zero to Plugin\n\nIn the previous challenge you explored an existing plugin. Now you will\nbuild one yourself. The goal is to understand the minimum requirements\nfor a working plugin and the process of creating each piece.\n\n## Step 1: The Manifest (plugin.json)\n\nEvery plugin starts with `plugin.json`. This is the only file that is\nabsolutely required. Without it, Claude Code does not recognize the\ndirectory as a plugin.\n\n### Required Fields\n\n```json\n{\n  \"name\": \"git-helper\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Git workflow tools for common operations\"\n}\n```\n\n**name**: A unique identifier in kebab-case. This is how the plugin is\nreferenced internally. Use lowercase letters, numbers, and hyphens only.\nExamples: `code-quality`, `git-helper`, `deploy-tools`.\n\n**version**: Follows semantic versioning (semver). The format is\n`major.minor.patch`:\n- `1.0.0` -- initial release\n- `1.1.0` -- added a new feature (minor bump)\n- `1.1.1` -- fixed a bug (patch bump)\n- `2.0.0` -- breaking change (major bump)\n\nStart with `1.0.0` for your first version.\n\n**description**: A one-sentence summary of what the plugin does. This\nis displayed to users when they list installed plugins, so make it\nclear and specific. Compare:\n- Bad: \"Some tools\" (too vague)\n- Good: \"Git workflow tools for status checks, branch management, and\n  commit validation\" (specific and helpful)\n\n### The Minimal Viable Plugin\n\nA plugin with ONLY `plugin.json` is technically valid, but it does\nnothing useful. The minimal *useful* plugin is:\n\n```\nmy-plugin/\n  plugin.json         # The manifest\n  skills/\n    my-skill/\n      SKILL.md        # One skill\n```\n\nThis gives you a manifest (so Claude Code recognizes the plugin) and\none skill (so the plugin actually does something).\n\n## Step 2: Creating a Skill\n\nSkills live in `skills/<name>/SKILL.md`. The folder name becomes the\nslash command. A skill file has two parts:\n\n### YAML Frontmatter\n\nThe frontmatter is between `---` markers at the top of the file. It\ndefines metadata:\n\n```yaml\n---\ndescription: Show git status in a friendly, organized format\nallowedTools: Bash\nargs:\n  - name: path\n    description: Optional path to check status for\n    required: false\n---\n```\n\n| Field | Purpose |\n|-------|----------|\n| `description` | What the skill does (shown in skill list, used for auto-triggering) |\n| `allowedTools` | Comma-separated list of tools the skill can use (omit for all tools) |\n| `args` | Named arguments the skill accepts |\n\n### Markdown Body\n\nEverything below the closing `---` is the prompt template. This is what\nClaude receives as instructions when the skill is invoked:\n\n```markdown\nRun `git status` and present the results in a clear, organized format.\n\n## Output Format\n- Group changes by status (staged, unstaged, untracked)\n- Show file counts for each group\n- Highlight any conflicts\n- Suggest next steps based on the current state\n```\n\nWrite the body as you would write a prompt: be specific about what you\nwant, provide structure, and define the expected output.\n\n## Step 3: Testing Your Plugin\n\nTo test a plugin during development, load it for a single session:\n\n```bash\nclaude --plugin-dir /path/to/my-plugin\n```\n\nThis loads the plugin temporarily. You can then invoke your skills:\n```\n/my-skill\n```\n\nWhen you modify files, restart Claude Code to pick up changes.\n\n## Step 4: Iterating\n\nPlugin development is iterative:\n1. Create or modify a component file\n2. Restart Claude Code with `claude --plugin-dir /path/to/plugin`\n3. Test the component\n4. Adjust and repeat\n\nThere is no build step or compilation. You edit markdown files and\nreload. This makes the feedback loop very fast.\n\n## A Complete Example\n\nHere is a full minimal plugin -- a \"git-helper\" with one skill:\n\n**git-helper/plugin.json**\n```json\n{\n  \"name\": \"git-helper\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Git workflow tools for status, branches, and commits\"\n}\n```\n\n**git-helper/skills/git-status/SKILL.md**\n```markdown\n---\ndescription: Show git status in a clean, organized format\nallowedTools: Bash, Read\n---\n\nRun `git status` and present the results clearly.\n\n## Instructions\n1. Run `git status --porcelain` to get machine-readable output\n2. Group files by status: staged, modified, untracked\n3. Show counts for each group\n4. If there are conflicts, highlight them prominently\n5. Suggest the likely next step (commit, add, resolve conflicts)\n\n## Output Format\nUse markdown with clear sections for each file status group.\n```\n\n---\n\n## Your Task\n\nCreate a working plugin called `git-helper` from scratch. Your plugin\nneeds:\n\n1. A valid `plugin.json` manifest with name, version, and description\n2. At least one skill in the correct directory structure\n3. The skill must have proper YAML frontmatter (with a description)\n4. The skill body must contain meaningful instructions\n\nYou decide what the skill does -- it could be git-status, git-log,\nbranch-summary, or anything git-related.\n\n## Objectives\n1. Create plugin.json with name, version, and description\n2. Create at least one skill at skills/<name>/SKILL.md\n3. The skill must have YAML frontmatter with a description field\n4. The skill body must contain structured instructions\n"
      }
    ],
    "cleanBefore": true
  },

  "objectives": [
    {
      "id": "obj-1",
      "description": "Create plugin.json with name, version, and description fields",
      "type": "file_contains",
      "target": "plugin.json",
      "pattern": "\"name\"",
      "required": true
    },
    {
      "id": "obj-2",
      "description": "plugin.json has version field following semver",
      "type": "file_contains",
      "target": "plugin.json",
      "pattern": "\"version\"",
      "required": true
    },
    {
      "id": "obj-3",
      "description": "plugin.json has a description field",
      "type": "file_contains",
      "target": "plugin.json",
      "pattern": "\"description\"",
      "required": true
    },
    {
      "id": "obj-4",
      "description": "Create at least one skill in skills/<name>/SKILL.md",
      "type": "command_output_contains",
      "command": "find ~/dojo-workspace/challenge-16-002/skills -name 'SKILL.md' 2>/dev/null | head -5",
      "pattern": "SKILL\\.md",
      "required": true
    },
    {
      "id": "obj-5",
      "description": "Skill has YAML frontmatter with a description field",
      "type": "command_output_contains",
      "command": "find ~/dojo-workspace/challenge-16-002/skills -name 'SKILL.md' -exec head -10 {} \\; 2>/dev/null",
      "pattern": "description:",
      "required": true
    }
  ],

  "bonusObjectives": [
    {
      "id": "bonus-1",
      "description": "Skill has allowedTools to restrict tool access",
      "type": "command_output_contains",
      "command": "find ~/dojo-workspace/challenge-16-002/skills -name 'SKILL.md' -exec cat {} \\; 2>/dev/null",
      "pattern": "allowedTools:",
      "xpBonus": 40
    },
    {
      "id": "bonus-2",
      "description": "Plugin has more than one skill",
      "type": "command_output_contains",
      "command": "find ~/dojo-workspace/challenge-16-002/skills -name 'SKILL.md' 2>/dev/null | wc -l | tr -d ' '",
      "pattern": "[2-9]",
      "xpBonus": 50
    },
    {
      "id": "bonus-3",
      "description": "Skill defines named arguments with args field",
      "type": "command_output_contains",
      "command": "find ~/dojo-workspace/challenge-16-002/skills -name 'SKILL.md' -exec cat {} \\; 2>/dev/null",
      "pattern": "args:",
      "xpBonus": 40
    }
  ],

  "hints": [
    {
      "level": 1,
      "text": "Start with plugin.json containing name (kebab-case), version (like 1.0.0), and description (one sentence). Then create the skills/ directory, a subfolder named after your skill, and SKILL.md inside that subfolder.",
      "xpCost": 20
    },
    {
      "level": 2,
      "text": "The skill file needs YAML frontmatter between --- markers at the top with at least a 'description' field. Below the frontmatter, write the prompt instructions. Think about what steps Claude should follow when the skill is invoked and what the output should look like.",
      "xpCost": 55
    },
    {
      "level": 3,
      "text": "Create plugin.json with: {\"name\": \"git-helper\", \"version\": \"1.0.0\", \"description\": \"Git workflow tools for status and branch management\"}. Then create skills/git-status/SKILL.md with frontmatter containing 'description: Show git status in a clear format' and 'allowedTools: Bash', followed by instructions to run git status, group results by file status, and suggest next steps.",
      "xpCost": 105
    }
  ],

  "solution": {
    "approach": "Create plugin.json with the three required fields, then create a skill directory with a properly structured SKILL.md file containing frontmatter and instructions.",
    "example": "Create a git-helper plugin with plugin.json and a git-status skill that shows status in an organized format",
    "alternativeApproaches": [
      "Scaffold a new plugin from scratch with a manifest and one skill",
      "Build a minimal plugin for git workflow automation"
    ]
  },

  "learningPoints": [
    "plugin.json is the only required file and must have name (kebab-case), version (semver), and description",
    "The minimal useful plugin is plugin.json plus one skill in skills/<name>/SKILL.md",
    "Skills have YAML frontmatter (metadata) and a markdown body (prompt template)",
    "The skill folder name becomes the slash command name (skills/review/ becomes /review)",
    "Test plugins with 'claude --plugin-dir /path/to/plugin' and reload after changes",
    "Plugin development has no build step -- edit files and reload"
  ],

  "nextChallenge": "16-003"
}
