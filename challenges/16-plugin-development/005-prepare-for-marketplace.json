{
  "id": "16-005",
  "module": "plugin-development",
  "title": "Prepare for Marketplace",
  "description": "Learn to prepare a plugin for distribution via the Claude Code marketplace. Publishing makes your tools available to the entire community.",
  "difficulty": "advanced",
  "xpReward": 400,
  "estimatedMinutes": 20,
  "skills": ["plugin-publishing", "marketplace-requirements", "version-management"],

  "setup": {
    "workingDir": "~/dojo-workspace/challenge-16-005",
    "initialFiles": [
      {
        "path": "README.md",
        "content": "# Challenge: Prepare for Marketplace\n\nPrepare a plugin for publishing to the Claude Code marketplace.\n\n---\n\n## What Is the Marketplace?\n\nThe Claude Code marketplace is a registry where developers publish\nplugins for others to discover and install. When you publish a plugin,\nany Claude Code user can install it with a single command:\n\n```bash\nclaude plugin install your-plugin-name\n```\n\nThe marketplace is how you share your tools with the community. But\npublishing requires more than just working code -- your plugin needs\nproper metadata, documentation, and quality standards.\n\n## The marketplace.json File\n\nBeyond `plugin.json` (the plugin manifest), marketplace publishing\nrequires a `marketplace.json` file with additional metadata for the\nlisting:\n\n```json\n{\n  \"displayName\": \"Awesome Toolbox\",\n  \"author\": {\n    \"name\": \"Your Name\",\n    \"url\": \"https://github.com/yourname\"\n  },\n  \"repository\": \"https://github.com/yourname/awesome-toolbox\",\n  \"tags\": [\"productivity\", \"code-quality\", \"developer-tools\"],\n  \"category\": \"developer-tools\",\n  \"license\": \"MIT\"\n}\n```\n\n| Field | Required | Purpose |\n|-------|----------|----------|\n| `displayName` | Yes | Human-friendly name shown in marketplace listings |\n| `author` | Yes | Who built this plugin (name and optional URL) |\n| `repository` | Yes | GitHub/GitLab URL where the source code lives |\n| `tags` | Yes | Keywords for search and discovery |\n| `category` | Recommended | Primary category for browsing |\n| `license` | Recommended | Open source license (MIT, Apache-2.0, etc.) |\n\n### displayName vs. name\n\nThe `name` field in `plugin.json` is the machine identifier\n(`awesome-toolbox`). The `displayName` in `marketplace.json` is the\nhuman-readable name (`Awesome Toolbox`). The display name can include\nspaces, capitalization, and punctuation.\n\n### Tags for Discoverability\n\nTags help users find your plugin when searching. Use specific,\nmeaningful tags:\n- Good: `[\"code-review\", \"linting\", \"eslint\", \"code-quality\"]`\n- Bad: `[\"cool\", \"awesome\", \"best\", \"plugin\"]`\n\nInclude the problem domain (\"code-review\"), the tools involved\n(\"eslint\"), and the general category (\"code-quality\").\n\n## Version Management\n\nYour plugin uses semantic versioning (semver) in `plugin.json`. Before\npublishing, ensure the version is appropriate:\n\n```\nmajor.minor.patch\n  |     |     |\n  |     |     +-- Bug fixes, typo corrections\n  |     +-------- New features, new components\n  +-------------- Breaking changes\n```\n\n**Version guidelines:**\n- Start at `1.0.0` for your first public release\n- `0.x.x` indicates pre-release / unstable\n- Bump `patch` when you fix bugs or improve descriptions\n- Bump `minor` when you add new skills, agents, or commands\n- Bump `major` when you rename components, change config format, or\n  remove features\n\nA version of `0.1.0` tells users \"this is not stable yet.\" For\nmarketplace publishing, aim for `1.0.0` or higher.\n\n## Documentation: README.md\n\nThe `README.md` file is the face of your plugin. Marketplace users see\nit when deciding whether to install. A good README includes:\n\n### Essential Sections\n\n```markdown\n# Plugin Name\n\nOne-line description of what the plugin does.\n\n## Features\n- Feature 1: what it does\n- Feature 2: what it does\n- Feature 3: what it does\n\n## Installation\n```bash\nclaude plugin install your-plugin-name\n```\n\nOr manually:\n```bash\nclaude config add plugins /path/to/plugin\n```\n\n## Usage\n\n### /skill-name\nDescription of the skill and how to use it.\n\n### Agent: agent-name\nDescription of the agent and when Claude uses it.\n\n## Configuration\nIf the plugin supports .local.md configuration, explain\nthe available settings.\n\n## License\nMIT License\n```\n\n### README Quality Checklist\n- [ ] Clear description of what the plugin does\n- [ ] Lists all available skills/commands with examples\n- [ ] Installation instructions (marketplace and manual)\n- [ ] Configuration guide (if applicable)\n- [ ] License information\n\n## Quality Checklist for Publishing\n\nBefore publishing, verify:\n\n### Structure\n- [ ] `plugin.json` has name, version (>= 1.0.0), description\n- [ ] `marketplace.json` has displayName, author, repository, tags\n- [ ] All component files are in correct locations\n- [ ] `README.md` documents features, installation, usage\n\n### Portability\n- [ ] No hardcoded absolute paths -- use `${CLAUDE_PLUGIN_ROOT}`\n- [ ] No machine-specific assumptions\n- [ ] Config template provided (if plugin uses .local.md)\n\n### Quality\n- [ ] All components have clear descriptions in frontmatter\n- [ ] Skill/command instructions are specific and actionable\n- [ ] Agent tool restrictions are appropriate (not too broad)\n- [ ] No placeholder or TODO text in component files\n\n### Distribution\n- [ ] Source code in a public GitHub repository\n- [ ] LICENSE file present\n- [ ] Version is >= 1.0.0 for production readiness\n\n## The ${CLAUDE_PLUGIN_ROOT} Rule\n\nThis is critical for marketplace plugins. Any path reference inside\nyour plugin MUST use `${CLAUDE_PLUGIN_ROOT}` instead of absolute paths:\n\n```\n# BAD -- breaks when installed on another machine\ncommand: node /Users/me/plugins/my-plugin/scripts/validate.js\n\n# GOOD -- works everywhere\ncommand: node ${CLAUDE_PLUGIN_ROOT}/scripts/validate.js\n```\n\nWhen a user installs your plugin, it gets placed in their plugins\ndirectory. `${CLAUDE_PLUGIN_ROOT}` automatically resolves to wherever\nthat is.\n\n---\n\n## Your Task\n\nThis workspace has a starter plugin called `awesome-toolbox` with one\nskill. Prepare it for marketplace publishing by adding everything\nneeded.\n\nYou need to:\n\n1. **Update plugin.json**: ensure it has proper metadata and a\n   production-ready version (>= 1.0.0)\n2. **Create marketplace.json**: with displayName, author, repository,\n   and tags\n3. **Rewrite README.md**: with Installation, Usage, and Features\n   sections (replace this challenge README with a real plugin README)\n4. **Add a LICENSE file**: choose an open source license (MIT is common)\n5. **Verify quality**: ensure descriptions are clear and no hardcoded\n   paths exist\n\n## Objectives\n1. plugin.json has complete metadata (name, version >= 1.0.0,\n   description)\n2. marketplace.json exists with displayName, author, repository, tags\n3. README.md documents the plugin with Installation and Usage sections\n4. LICENSE file exists\n5. All paths use ${CLAUDE_PLUGIN_ROOT} (no hardcoded absolute paths)\n"
      },
      {
        "path": "plugin.json",
        "content": "{\n  \"name\": \"awesome-toolbox\",\n  \"version\": \"0.1.0\",\n  \"description\": \"A collection of awesome tools\"\n}\n"
      },
      {
        "path": "skills/hello/SKILL.md",
        "content": "---\ndescription: A friendly greeting skill that offers help with coding tasks\nallowedTools: Read, Glob\n---\n\nGreet the user warmly and offer to help them with their coding tasks.\n\n## Instructions\n1. Provide a friendly greeting\n2. Briefly list the capabilities available in this plugin\n3. Ask what the user would like help with\n\n## Tone\n- Professional but friendly\n- Encouraging and helpful\n- Concise -- do not ramble\n"
      },
      {
        "path": "skills/summarize/SKILL.md",
        "content": "---\ndescription: Summarize code files or project structure concisely\nallowedTools: Read, Glob, Grep\nargs:\n  - name: target\n    description: File or directory to summarize\n    required: false\n---\n\nSummarize the specified code file or project structure.\n\n## Instructions\n1. If a specific file is given via $ARGUMENTS, read and summarize it\n2. If no target is specified, summarize the current project structure\n3. Focus on purpose, architecture, and key components\n4. Keep the summary concise (under 10 bullet points)\n\n## Output Format\n### Summary\n- Key point 1\n- Key point 2\n- ...\n\n### Recommendations\n- Any notable observations or suggestions\n"
      }
    ],
    "cleanBefore": true
  },

  "objectives": [
    {
      "id": "obj-1",
      "description": "plugin.json has name, version (>= 1.0.0), and description",
      "type": "file_contains",
      "target": "plugin.json",
      "pattern": "\"version\":\\s*\"[1-9]",
      "required": true
    },
    {
      "id": "obj-2",
      "description": "marketplace.json exists with displayName",
      "type": "file_contains",
      "target": "marketplace.json",
      "pattern": "displayName",
      "required": true
    },
    {
      "id": "obj-3",
      "description": "marketplace.json has author and repository",
      "type": "file_contains",
      "target": "marketplace.json",
      "pattern": "author",
      "required": true
    },
    {
      "id": "obj-4",
      "description": "marketplace.json has tags for discoverability",
      "type": "file_contains",
      "target": "marketplace.json",
      "pattern": "tags",
      "required": true
    },
    {
      "id": "obj-5",
      "description": "README.md documents the plugin with Installation and Usage sections",
      "type": "file_contains",
      "target": "README.md",
      "pattern": "##.*[Ii]nstall|##.*[Uu]sage|##.*[Ff]eature|how to|getting started",
      "required": true
    },
    {
      "id": "obj-6",
      "description": "LICENSE file exists",
      "type": "file_exists",
      "target": "LICENSE",
      "required": true
    }
  ],

  "bonusObjectives": [
    {
      "id": "bonus-1",
      "description": "marketplace.json has a repository URL",
      "type": "file_contains",
      "target": "marketplace.json",
      "pattern": "repository.*http|repository.*github",
      "xpBonus": 30
    },
    {
      "id": "bonus-2",
      "description": "marketplace.json has a category field",
      "type": "file_contains",
      "target": "marketplace.json",
      "pattern": "category",
      "xpBonus": 30
    },
    {
      "id": "bonus-3",
      "description": "README lists the available skills with descriptions",
      "type": "file_contains",
      "target": "README.md",
      "pattern": "/hello|/summarize|skill",
      "xpBonus": 40
    },
    {
      "id": "bonus-4",
      "description": "plugin.json has an author field",
      "type": "file_contains",
      "target": "plugin.json",
      "pattern": "\"author\"",
      "xpBonus": 30
    },
    {
      "id": "bonus-5",
      "description": "No hardcoded absolute paths in any component file",
      "type": "command_output_contains",
      "command": "grep -rn '/Users/\\|/home/' ~/dojo-workspace/challenge-16-005/skills/ ~/dojo-workspace/challenge-16-005/agents/ ~/dojo-workspace/challenge-16-005/commands/ ~/dojo-workspace/challenge-16-005/hooks/ 2>/dev/null | wc -l | tr -d ' '",
      "pattern": "^0$",
      "xpBonus": 40
    }
  ],

  "hints": [
    {
      "level": 1,
      "text": "You need to: (1) bump the version in plugin.json from 0.1.0 to 1.0.0 or higher, (2) create marketplace.json with displayName, author, repository, and tags, (3) rewrite README.md as real plugin documentation with Installation and Usage sections, (4) add a LICENSE file. Think of this as making the plugin ready for someone else to use.",
      "xpCost": 25
    },
    {
      "level": 2,
      "text": "For marketplace.json, include: displayName (human-friendly name), author (object with name and url), repository (GitHub URL), tags (array of relevant keywords like 'productivity', 'summarization'). For README.md, include sections: Features (list what the plugin does), Installation (claude plugin install command), Usage (describe each skill with its slash command). For LICENSE, MIT is the most common choice.",
      "xpCost": 80
    },
    {
      "level": 3,
      "text": "Update plugin.json version to 1.0.0 and add an author field. Create marketplace.json with: {\"displayName\": \"Awesome Toolbox\", \"author\": {\"name\": \"Your Name\", \"url\": \"https://github.com/yourname\"}, \"repository\": \"https://github.com/yourname/awesome-toolbox\", \"tags\": [\"productivity\", \"summarization\", \"developer-tools\"], \"category\": \"developer-tools\", \"license\": \"MIT\"}. Rewrite README.md with ## Features, ## Installation, ## Usage sections documenting /hello and /summarize skills. Create a LICENSE file with the MIT license text.",
      "xpCost": 150
    }
  ],

  "solution": {
    "approach": "Update plugin.json to production version, create marketplace.json with listing metadata, rewrite README.md as plugin documentation, and add a LICENSE file.",
    "example": "Prepare the awesome-toolbox plugin for marketplace: bump version to 1.0.0, create marketplace.json with metadata, write a proper README with installation and usage sections, and add MIT LICENSE",
    "alternativeApproaches": [
      "Make this plugin ready for publishing to the marketplace with full documentation and metadata",
      "Add all the files and metadata needed to share this plugin publicly"
    ]
  },

  "learningPoints": [
    "marketplace.json adds metadata beyond plugin.json: displayName, author, repository, tags for the listing",
    "Version >= 1.0.0 signals production readiness; 0.x.x signals pre-release/unstable",
    "README.md is the face of your plugin -- it should document features, installation, and usage clearly",
    "All internal paths must use ${CLAUDE_PLUGIN_ROOT} instead of absolute paths for portability",
    "Tags and category in marketplace.json help users discover your plugin through search",
    "A LICENSE file (MIT, Apache-2.0, etc.) clarifies how others can use and distribute your plugin"
  ],

  "nextChallenge": null
}
